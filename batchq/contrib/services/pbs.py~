from batchq.core import batchq
from batchq.pipelines.shell.ssh import SSHTerminal
from batchq.pipelines.shell.sftp import SFTPTerminal

class PBS( batchq.Model ):
    id = batchq.Property()
    local = batchq.Property()
    remote = batchq.Property()

    ssh = batchq.Connection(SSHTerminal)   
    isrunning = batchq.Function("")
    queue = batchq.Function("")
    cancel = batchq.Function("")
    isqueued = batchq.Function("")

    sftp = batchq.Connection(SFTPTerminal)     
    push = batchq.Function("")
    pull = batchq.Function("")

    def submit(self):
        if not self.isrunning():
            self.push()
            self.queue()

if __name__ == "__main__":
    import getpass
    passwd = getpass.getpass()
    p = PBS("localhost","tfr",passwd)
    p.
